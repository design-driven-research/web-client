{"version":3,"sources":["rdd/calculators/cost.cljs"],"mappings":";AAGA,8CAAA,9CAAMA,oGACHC;AADH,AAGE,IAAMC,WAAS,AAAA,+GAAuBD;IAChCE,MAAI,AAAA,sGAAkBF;IACtBG,WAAS,AAAA,wFAAWD;IACpBE,cAAY,AAAA,mGAAgBJ;IAC5BK,mBAAiB,AAACC,+CAAO,WAAKC,IAAIC;AAAT,AACE,IAAMC,iBAAe,AAAA,kGAAgBD;IAC/BE,wBAAsB,AAAA,iGAAA,AAAA,oHAAIF;IAE1BG,YAAU,AAAA,2GAAA,AAAA,4FAAIH;IACdI,uBAAqB,AAAA,iGAAA,AAAA,oHAAA,AAAA,4FAAIJ;IACzBK,uBAAqB,CAAGF,YAAUC;IAElCE,aAAW,CAAG,CAAGD,uBAAqBH,yBAAuBD;AAPnE,AAQE,QAAGF,MAAIO;GATnB,IASmCV;IACpDW,kBAAgB,CAAGV,mBAAiBJ;AAd1C,AAAA,kDAAA,sEAAA,hBAgBSc,6EACIZ","names":["rdd.calculators.cost/labor-cost-for-process","process","quantity","uom","uom-code","labor-lines","total-labor-cost","cljs.core.reduce","acc","cur","labor-duration","labor-interval-factor","role-cost","role-interval-factor","normalized-role-cost","normalized","normalized-cost"],"sourcesContent":["(ns rdd.calculators.cost\n  (:require))\n\n(defn labor-cost-for-process\n  [process]\n\n  (let [quantity (:measurement/quantity process)\n        uom (:measurement/uom process)\n        uom-code (:uom/code uom)\n        labor-lines (:process/labor process)\n        total-labor-cost (reduce (fn [acc cur]\n                                   (let [labor-duration (:time/duration cur)\n                                         labor-interval-factor (-> cur :time/duration-interval :scale/factor)\n\n                                         role-cost (-> cur :labor/role :currency.usd/cost)\n                                         role-interval-factor (-> cur :labor/role :time/duration-interval :scale/factor)\n                                         normalized-role-cost (* role-cost role-interval-factor)\n\n                                         normalized (* (/ normalized-role-cost labor-interval-factor) labor-duration)]\n                                     (+ acc normalized))) 0 labor-lines)\n        normalized-cost (/ total-labor-cost quantity)]\n\n    {:cost normalized-cost\n     :uom-code uom-code}))\n\n#_(labor-cost-for-process (d/entity (db-core/db) 58))"]}